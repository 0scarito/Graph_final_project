# =============================================================================
# PYLINT CONFIGURATION - Panama Papers Neo4j Project
# =============================================================================
# Target Score: 9.5+/10
# Python Version: 3.11+
# Frameworks: FastAPI, Pydantic, neo4j-driver
#
# Usage:
#   pylint app/ scripts/ tests/
#   pylint app/main.py --output-format=colorized
#
# =============================================================================

[MASTER]
# Use multiple processes to speed up Pylint
jobs=4

# Pickle collected data for later comparisons
persistent=yes

# List of plugins (as comma separated values of python module names)
load-plugins=
    pylint.extensions.docparams,
    pylint.extensions.mccabe,
    pylint.extensions.check_elif

# When enabled, pylint would attempt to guess common misconfiguration
suggestion-mode=yes

# Allow loading of arbitrary C extensions
unsafe-load-any-extension=no

# Minimum Python version to use for version dependent checks
py-version=3.11

# Files or directories to be skipped (regex patterns)
ignore=
    .git,
    __pycache__,
    .venv,
    venv,
    node_modules,
    .pytest_cache,
    .mypy_cache,
    htmlcov,
    dist,
    build,
    *.egg-info

# Files or directories matching regex to be skipped
ignore-patterns=
    \.git,
    __pycache__,
    .*\.pyc$,
    .*\.pyo$,
    .*\.egg-info$,
    test_.*\.py$

# Add paths to the list of the source roots
source-roots=app,scripts,tests

# =============================================================================
# MESSAGES CONTROL
# =============================================================================

[MESSAGES CONTROL]
# Disable specific messages to reduce false positives and achieve 9.5+ score
# Format: C=Convention, R=Refactor, W=Warning, E=Error, F=Fatal

disable=
    # -------------------------------------------------------------------------
    # Module-level docstrings (scripts and tests don't always need them)
    # -------------------------------------------------------------------------
    missing-module-docstring,      # C0114: Scripts may not need module docs
    
    # -------------------------------------------------------------------------
    # Class and method structure (Pydantic/FastAPI patterns)
    # -------------------------------------------------------------------------
    too-few-public-methods,        # R0903: Pydantic models often have few methods
    too-many-public-methods,       # R0904: Large API classes are OK
    too-many-instance-attributes,  # R0902: Pydantic models need flexibility
    too-many-arguments,            # R0913: FastAPI endpoints have many params
    too-many-locals,               # R0914: Complex queries need many locals
    too-many-branches,             # R0912: Complex business logic
    too-many-statements,           # R0915: Long functions sometimes necessary
    too-many-return-statements,    # R0911: Multiple returns for early exit
    
    # -------------------------------------------------------------------------
    # Import handling (modern Python patterns)
    # -------------------------------------------------------------------------
    wrong-import-order,            # C0411: isort handles this
    ungrouped-imports,             # C0412: isort handles this
    wrong-import-position,         # C0413: Sometimes needed for path setup
    import-outside-toplevel,       # C0415: Conditional imports are OK
    
    # -------------------------------------------------------------------------
    # Logging (f-strings in logging are acceptable in Python 3.11+)
    # -------------------------------------------------------------------------
    logging-fstring-interpolation, # W1203: f-strings in logging are fine
    logging-format-interpolation,  # W1202: %-formatting vs f-strings
    logging-not-lazy,              # W1201: Lazy logging not always needed
    
    # -------------------------------------------------------------------------
    # Async/await patterns
    # -------------------------------------------------------------------------
    unnecessary-pass,              # W0107: pass in abstract methods
    
    # -------------------------------------------------------------------------
    # Type hints and annotations
    # -------------------------------------------------------------------------
    unsubscriptable-object,        # E1136: False positives with generics
    
    # -------------------------------------------------------------------------
    # Code style preferences
    # -------------------------------------------------------------------------
    line-too-long,                 # C0301: Handled by max-line-length setting
    invalid-name,                  # C0103: Sometimes short names are OK
    
    # -------------------------------------------------------------------------
    # FastAPI/Pydantic specific
    # -------------------------------------------------------------------------
    no-self-argument,              # E0213: Pydantic validators use cls
    no-member,                     # E1101: Dynamic attributes from Pydantic
    
    # -------------------------------------------------------------------------
    # Testing patterns
    # -------------------------------------------------------------------------
    protected-access,              # W0212: Tests may access protected members
    redefined-outer-name,          # W0621: pytest fixtures redefine names
    unused-argument,               # W0613: Fixtures may not use all args
    
    # -------------------------------------------------------------------------
    # Duplicate code (handled by other tools)
    # -------------------------------------------------------------------------
    duplicate-code,                # R0801: Similar code in tests is OK

# Enable specific checks that are disabled by default
enable=
    useless-suppression,           # Report useless # pylint: disable
    use-symbolic-message-instead,  # Prefer symbolic names in disable

# =============================================================================
# REPORTS
# =============================================================================

[REPORTS]
# Set the output format
output-format=colorized

# Include a hint for the correct naming format with invalid-name
include-naming-hint=yes

# Tells whether to display a full report or only the messages
reports=yes

# Activate the evaluation score
score=yes

# Template for the message output
msg-template={path}:{line}:{column}: {msg_id}: {msg} ({symbol})

# =============================================================================
# FORMAT
# =============================================================================

[FORMAT]
# Maximum number of characters on a single line
max-line-length=120

# Maximum number of lines in a module
max-module-lines=2000

# String used as indentation unit (4 spaces)
indent-string='    '

# Number of spaces of indent required inside a hanging or continued line
indent-after-paren=4

# Expected format of line ending (LF for Unix)
expected-line-ending-format=LF

# Allow the body of a class to be on the same line as the declaration
single-line-class-stmt=no

# Allow the body of an if to be on the same line as the test
single-line-if-stmt=no

# =============================================================================
# BASIC
# =============================================================================

[BASIC]
# Naming style matching correct argument names
argument-naming-style=snake_case

# Naming style matching correct attribute names
attr-naming-style=snake_case

# Naming style matching correct class attribute names
class-attribute-naming-style=any

# Naming style matching correct class names
class-naming-style=PascalCase

# Naming style matching correct constant names
const-naming-style=UPPER_CASE

# Naming style matching correct function names
function-naming-style=snake_case

# Naming style matching correct method names
method-naming-style=snake_case

# Naming style matching correct module names
module-naming-style=snake_case

# Naming style matching correct variable names
variable-naming-style=snake_case

# Minimum line length for functions/classes that require docstrings
docstring-min-length=10

# Good variable names which should always be accepted
good-names=
    i,
    j,
    k,
    n,
    x,
    y,
    z,
    e,
    ex,
    f,
    fd,
    fp,
    id,
    db,
    ok,
    _,
    pk,
    df,
    ax,
    fig,
    T,
    logger,
    app,
    api,

# Bad variable names which should always be refused
bad-names=
    foo,
    bar,
    baz,
    toto,
    tutu,
    tata,

# Include a hint for the correct naming format with invalid-name
include-naming-hint=yes

# =============================================================================
# DESIGN
# =============================================================================

[DESIGN]
# Maximum number of arguments for function / method (default 5)
max-args=10

# Maximum number of attributes for a class (default 7)
max-attributes=20

# Maximum number of boolean expressions in an if statement (default 5)
max-bool-expr=6

# Maximum number of branch for function / method body (default 12)
max-branches=15

# Maximum number of locals for function / method body (default 15)
max-locals=20

# Maximum number of parents for a class (default 7)
max-parents=10

# Maximum number of public methods for a class (default 20)
max-public-methods=30

# Maximum number of return / yield for function / method body (default 6)
max-returns=8

# Maximum number of statements in function / method body (default 50)
max-statements=60

# Minimum number of public methods for a class (default 2)
min-public-methods=0

# =============================================================================
# CLASSES
# =============================================================================

[CLASSES]
# List of method names used to declare (i.e. assign) instance attributes
defining-attr-methods=
    __init__,
    __new__,
    setUp,
    __post_init__,
    model_post_init,

# List of valid names for the first argument in a class method
valid-classmethod-first-arg=cls

# List of valid names for the first argument in a metaclass class method
valid-metaclass-classmethod-first-arg=cls

# List of member names, which should be excluded from the protected access
exclude-protected=
    _asdict,
    _fields,
    _replace,
    _source,
    _make,
    _meta,
    _registry,

# =============================================================================
# IMPORTS
# =============================================================================

[IMPORTS]
# Allow wildcard imports from modules that define __all__
allow-wildcard-with-all=no

# Force import order to recognize a module as part of a third party library
known-third-party=
    fastapi,
    pydantic,
    neo4j,
    httpx,
    pytest,
    starlette,
    uvicorn,
    dotenv,

# Force import order to recognize a module as part of the current project
known-first-party=
    app,
    database,
    models,
    routes,

# =============================================================================
# EXCEPTIONS
# =============================================================================

[EXCEPTIONS]
# Exceptions that will emit a warning when caught
overgeneral-exceptions=
    builtins.BaseException,
    builtins.Exception,

# =============================================================================
# TYPECHECK
# =============================================================================

[TYPECHECK]
# List of decorators that produce context managers
contextmanager-decorators=
    contextlib.contextmanager,
    contextlib.asynccontextmanager,

# List of members which are set dynamically and missed by pylint inference
generated-members=
    REQUEST,
    acl_users,
    aq_parent,
    objects,
    DoesNotExist,
    id,
    pk,
    _meta,
    base_fields,
    context,
    # Neo4j specific
    data,
    keys,
    values,
    items,
    # Pydantic specific
    model_fields,
    model_config,
    model_computed_fields,

# List of class names for which member attributes should not be checked
ignored-classes=
    optparse.Values,
    thread._local,
    _thread._local,
    argparse.Namespace,
    # SQLAlchemy
    scoped_session,
    # Neo4j
    Record,
    Result,
    EagerResult,
    # Pydantic
    BaseModel,
    BaseSettings,

# List of module names for which member attributes should not be checked
ignored-modules=
    neo4j,
    neo4j.graph,

# Show a hint with possible names when a member name was not found
missing-member-hint=yes

# Minimum edit distance to consider a name as similar
missing-member-hint-distance=1

# Maximum number of similar names to show
missing-member-max-choices=1

# =============================================================================
# VARIABLES
# =============================================================================

[VARIABLES]
# List of additional names supposed to be defined in builtins
additional-builtins=

# Tells whether unused global variables should be treated as a violation
allow-global-unused-variables=yes

# List of names allowed to shadow builtins
allowed-redefined-builtins=
    id,
    type,
    filter,
    format,
    input,
    open,
    hash,

# A regular expression matching the name of dummy variables
dummy-variables-rgx=_+$|(_[a-zA-Z0-9_]*[a-zA-Z0-9]+?$)|dummy|^ignored_|^unused_

# List of strings which can identify a callback function by name
callbacks=
    cb_,
    _cb,
    callback_,
    _callback,

# =============================================================================
# LOGGING
# =============================================================================

[LOGGING]
# The type of string formatting that logging methods use
logging-format-style=new

# Logging modules to check that the string format arguments are in logging
logging-modules=logging

# =============================================================================
# SPELLING (disabled - requires enchant)
# =============================================================================

[SPELLING]
# Limits count of emitted suggestions for spelling mistakes
max-spelling-suggestions=4

# Spelling dictionary name (requires enchant)
spelling-dict=

# =============================================================================
# SIMILARITIES
# =============================================================================

[SIMILARITIES]
# Minimum lines number of a similarity (default 4)
min-similarity-lines=6

# Ignore comments when computing similarities
ignore-comments=yes

# Ignore docstrings when computing similarities
ignore-docstrings=yes

# Ignore imports when computing similarities
ignore-imports=yes

# Signatures are removed from the similarity computation
ignore-signatures=yes

# =============================================================================
# MISCELLANEOUS
# =============================================================================

[MISCELLANEOUS]
# List of note tags to take into consideration
notes=
    FIXME,
    XXX,
    TODO,
    HACK,
    BUG,

# Regular expression of note tags to take in consideration
notes-rgx=

# =============================================================================
# STRING
# =============================================================================

[STRING]
# Check for consistent use of non-u strings (unicode literals)
check-str-concat-over-line-jumps=no

# Check for implicit string concatenation
check-quote-consistency=no

# =============================================================================
# REFACTORING
# =============================================================================

[REFACTORING]
# Maximum number of nested blocks for function / method body
max-nested-blocks=5

# Complete name of functions that never returns
never-returning-functions=
    sys.exit,
    argparse.parse_error,

# =============================================================================
# METHOD_ARGS
# =============================================================================

[METHOD_ARGS]
# List of qualified names of positional arguments that are to be type-enforced
timeout-methods=
    requests.api.delete,
    requests.api.get,
    requests.api.head,
    requests.api.options,
    requests.api.patch,
    requests.api.post,
    requests.api.put,
    requests.api.request,
